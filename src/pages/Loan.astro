---
import Layout from "../layouts/Layout.astro"
import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"
import PopupLoan from "../components/user/PopupLoan.astro"

interface WordItem{
    word: string;
    es: string;
    en: string;
}

let response: Response;
let data: any;

let response_user_exist: Response;
let data_user_exist: any;

let response_data_user: any;
let data_user: any;

let text: any;
let text_1: any;
let text_2: any;
let err: any;

let isContinue = true;
let isGoogle = false;
let RegisterIncomplete = false;

import {getSession} from 'auth-astro/server';

const session = await getSession(Astro.request);

if(session){
    let response: Response;
    let data_response: any;
    isGoogle = true;

    try{
        response = await fetch("http://localhost:4000/auth/google", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                email: session.user?.email,
                username: session.user?.name
            })
        });

        data_response = await response.json();

        if(data_response.status == "Good Request"){
            Astro.cookies.set("ID-USER", data_response.id, {expires: new Date("9999-12-31")});
            Astro.cookies.set("W-INIT-ENT", "true", {expires: new Date("9999-12-31")});
        }else if(data_response.status == "Good Request Incomplete"){
            // Astro.cookies.set("ID-USER", "false", {expires: new Date("9999-12-31")});
            // Astro.cookies.set("W-INIT-ENT", "false", {expires: new Date("9999-12-31")});
            Astro.cookies.set("ID-USER", data_response.id, {expires: new Date("9999-12-31")});
            Astro.cookies.set("W-INIT-ENT", "true", {expires: new Date("9999-12-31")});
            RegisterIncomplete = true;
        }
        else{
            isGoogle = false
        }

    }catch(e){
        isContinue = false
        err = e;
        Astro.cookies.set("ID-USER", "false", {expires: new Date("9999-12-31")});
        Astro.cookies.set("W-INIT-ENT", "false", {expires: new Date("9999-12-31")});
        return Astro.redirect("/")
    }

}

const flag = (Astro.cookies.get("flag") || {})?.value;
const initiated = (Astro.cookies.get("W-INIT-ENT") || {})?.value;
const id_user = (Astro.cookies.get("ID-USER") || {})?.value;

try{
    response = await fetch("http://localhost:4000/words");
    data = await response.json();

    if(initiated != "false"){
        response_user_exist = await fetch(`http://localhost:4000/user/exists?id_user=${id_user}`);
        data_user_exist = await response_user_exist.json();

        response_data_user = await fetch(`http://localhost:4000/user/data?id_user=${id_user}`);
        data_user = await response_data_user.json();
        console.log(data_user.user_info[0].limit_monto)

        if(data_user_exist.state != "Good Request"){
            throw new Error("Error in the request to the server");
        }
    }else{
        throw new Error("Error in the request to the server");
    }

text_1 = {
    titulo_inicio: (data.find((item: { word: string }) => item.word === "titulo_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    nombre_inicio: (data.find((item: { word: string }) => item.word === "nombre_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    descripcion_inicio: (data.find((item: { word: string }) => item.word === "descripcion_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    calcular_inicio: (data.find((item: { word: string }) => item.word === "calcular_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    online_title: (data.find((item: { word: string }) => item.word === "article_1_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    online_description: (data.find((item: { word: string }) => item.word === "article_1_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    cuota_title: (data.find((item: { word: string }) => item.word === "article_2_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    cuota_description: (data.find((item: { word: string }) => item.word === "article_2_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    pay_title: (data.find((item: { word: string }) => item.word === "article_3_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    pay_description: (data.find((item: { word: string }) => item.word === "article_3_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    tasa_title: (data.find((item: { word: string }) => item.word === "article_4_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    tasa_description: (data.find((item: { word: string }) => item.word === "article_4_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_footer_titulo: (data.find((item: { word: string }) => item.word === "recursos_footer_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_1: (data.find((item: { word: string }) => item.word === "recursos_item_1") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_2: (data.find((item: { word: string }) => item.word === "recursos_item_2") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_3: (data.find((item: { word: string }) => item.word === "recursos_item_3") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_4: (data.find((item: { word: string }) => item.word === "recursos_item_4") || {})[flag === "es" ? 'es' : 'en'] as string,
    siganos_footer_titulo: (data.find((item: { word: string }) => item.word === "siganos_footer_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    siganos_item_1: (data.find((item: { word: string }) => item.word === "siganos_item_1") || {})[flag === "es" ? 'es' : 'en'] as string,
    siganos_item_2: (data.find((item: { word: string }) => item.word === "siganos_item_2") || {})[flag === "es" ? 'es' : 'en'] as string,
    legal_footer_titulo: (data.find((item: { word: string }) => item.word === "legal_footer_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    legal_item_1: (data.find((item: { word: string }) => item.word === "legal_item_1") || {})[flag === "es" ? 'es' : 'en'] as string,
    legal_item_2: (data.find((item: { word: string }) => item.word === "legal_item_2") || {})[flag === "es" ? 'es' : 'en'] as string,
    rights_footer: (data.find((item: { word: string }) => item.word === "rights_footer") || {})[flag === "es" ? 'es' : 'en'] as string,
    iniciar_text: (data.find((item: { word: string }) => item.word === "iniciar_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    registrarse_text: (data.find((item: { word: string }) => item.word === "registrarse_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    welcome_back_text: (data.find((item: { word: string }) => item.word === "welcome_back_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    have_you_text: (data.find((item: { word: string }) => item.word === "have_you_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    new_notifications_text: (data.find((item: { word: string }) => item.word === "new_notifications_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    view_all_text: (data.find((item: { word: string }) => item.word === "view_all_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    first_part_make_loan: (data.find((item: { word: string }) => item.word === "first_part_make_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    first_loan_text: (data.find((item: { word: string }) => item.word === "first_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    please_enter_text: (data.find((item: { word: string }) => item.word === "please_enter_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    make_loan_text: (data.find((item: { word: string }) => item.word === "make_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    available_balance: (data.find((item: { word: string }) => item.word === "available_balance") || {})[flag === "es" ? 'es' : 'en'] as string,
    total_income_text: (data.find((item: { word: string }) => item.word === "total_income_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    check_card_text: (data.find((item: { word: string }) => item.word === "check_card_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    content_check_card_text: (data.find((item: { word: string }) => item.word === "content_check_card_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    security_text: (data.find((item: { word: string }) => item.word === "security_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    content_security_text: (data.find((item: { word: string }) => item.word === "content_security_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    history_movements_text: (data.find((item: { word: string }) => item.word === "history_movements_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    learn_more_text: (data.find((item: { word: string }) => item.word === "learn_more_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    transferir_text: (data.find((item: { word: string }) => item.word === "transferir_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    simulate_loan_text: (data.find((item: { word: string }) => item.word === "simulate_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    more_text: (data.find((item: { word: string }) => item.word === "more_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    not_found_text: (data.find((item: { word: string }) => item.word === "not_found_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_information_loan: (data.find((item: { word: string }) => item.word === "text_information_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_information_personal: (data.find((item: { word: string }) => item.word === "text_information_personal") || {})[flag === "es" ? 'es' : 'en'] as string,
    type_loan: (data.find((item: { word: string }) => item.word === "type_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_finish_loan: (data.find((item: { word: string }) => item.word === "text_finish_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_confirm: (data.find((item: { word: string }) => item.word === "text_confirm") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_simulate: (data.find((item: { word: string }) => item.word === "text_simulate") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_amount_loan: (data.find((item: { word: string }) => item.word === "text_amount_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_tasa_loan: (data.find((item: { word: string }) => item.word === "text_tasa_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_cuotas: (data.find((item: { word: string }) => item.word === "text_cuotas") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_frecuencia: (data.find((item: { word: string }) => item.word === "text_frecuencia") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_name_complete: (data.find((item: { word: string }) => item.word === "text_name_complete") || {})[flag === "es" ? 'es' : 'en'] as string,
    email_text: (data.find((item: { word: string }) => item.word === "email_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    id_number_text: (data.find((item: { word: string }) => item.word === "id_number_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    phone_text: (data.find((item: { word: string }) => item.word === "phone_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_tasa_fija: (data.find((item: { word: string }) => item.word === "text_tasa_fija") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_tasa_variable: (data.find((item: { word: string }) => item.word === "text_tasa_variable") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_select_cuotas: (data.find((item: { word: string }) => item.word === "text_select_cuotas") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_select_frecuencia: (data.find((item: { word: string }) => item.word === "text_select_frecuencia") || {})[flag === "es" ? 'es' : 'en'] as string,
    title_profile_text: (data.find((item: { word: string }) => item.word === 'title_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_profile_text: (data.find((item: { word: string }) => item.word === 'description_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_profile_text: (data.find((item: { word: string }) => item.word === 'subtitle_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_subtitle_profile_text: (data.find((item: { word: string }) => item.word === 'description_subtitle_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    update_text: (data.find((item: { word: string }) => item.word === 'update_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    profile_picture_text: (data.find((item: { word: string }) => item.word === 'profile_picture_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_profile_picture_text: (data.find((item: { word: string }) => item.word === 'description_profile_picture_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    username_text: (data.find((item: { word: string }) => item.word === 'username_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    notifications_text: (data.find((item: { word: string }) => item.word === "notifications_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    description_notifications_text: (data.find((item: { word: string }) => item.word === 'description_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_notifications_text: (data.find((item: { word: string }) => item.word === 'subtitle_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription_notifications_text: (data.find((item: { word: string }) => item.word === 'subdescription_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle2_notifications_text: (data.find((item: { word: string }) => item.word === 'subtitle2_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription2_notifications_text: (data.find((item: { word: string }) => item.word === 'subdescription2_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_movements_text: (data.find((item: { word: string }) => item.word === 'title_movements_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_Transfer_text: (data.find((item: { word: string }) => item.word === 'title_Transfer_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_others_text: (data.find((item: { word: string }) => item.word === 'title_others_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_privacy_text: (data.find((item: { word: string }) => item.word === 'title_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_privacy_text: (data.find((item: { word: string }) => item.word === 'description_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_privacy_text: (data.find((item: { word: string }) => item.word === 'subtitle_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription_privacy_text: (data.find((item: { word: string }) => item.word === 'subdescription_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle2_privacy_text: (data.find((item: { word: string }) => item.word === 'subtitle2_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription2_privacy_text: (data.find((item: { word: string }) => item.word === 'subdescription2_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    consent_text: (data.find((item: { word: string }) => item.word === 'consent_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    current_password_text: (data.find((item: { word: string }) => item.word === 'current_password_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    change_password_text: (data.find((item: { word: string }) => item.word === 'change_password_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_new_password_invert: (data.find((item: { word: string }) => item.word === 'text_new_password_invert') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_repeat_new_password: (data.find((item: { word: string }) => item.word === 'text_repeat_new_password') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_security_text: (data.find((item: { word: string }) => item.word === 'title_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_security_text: (data.find((item: { word: string }) => item.word === 'description_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_security_text: (data.find((item: { word: string }) => item.word === 'subtitle_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription_security_text: (data.find((item: { word: string }) => item.word === 'subdescription_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle2_security_text: (data.find((item: { word: string }) => item.word === 'subtitle2_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription2_security_text: (data.find((item: { word: string }) => item.word === 'subdescription2_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    active_2fa_text: (data.find((item: { word: string }) => item.word === 'active_2fa_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    configure_2fa_text: (data.find((item: { word: string }) => item.word === 'configure_2fa_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    code_auth_text: (data.find((item: { word: string }) => item.word === 'code_auth_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    income_monthly_text: (data.find((item: { word: string }) => item.word === 'income_monthly_text') || {})[flag === "es" ? 'es' : 'en'] as string,
};

text_2 = {
    titulo_inicio: (data.find((item: { word: string }) => item.word === "titulo_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    nombre_inicio: (data.find((item: { word: string }) => item.word === "nombre_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    descripcion_inicio: (data.find((item: { word: string }) => item.word === "descripcion_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    calcular_inicio: (data.find((item: { word: string }) => item.word === "calcular_inicio") || {})[flag === "es" ? 'es' : 'en'] as string,
    online_title: (data.find((item: { word: string }) => item.word === "article_1_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    online_description: (data.find((item: { word: string }) => item.word === "article_1_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    cuota_title: (data.find((item: { word: string }) => item.word === "article_2_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    cuota_description: (data.find((item: { word: string }) => item.word === "article_2_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    pay_title: (data.find((item: { word: string }) => item.word === "article_3_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    pay_description: (data.find((item: { word: string }) => item.word === "article_3_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    tasa_title: (data.find((item: { word: string }) => item.word === "article_4_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    tasa_description: (data.find((item: { word: string }) => item.word === "article_4_description") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_footer_titulo: (data.find((item: { word: string }) => item.word === "recursos_footer_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_1: (data.find((item: { word: string }) => item.word === "recursos_item_1") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_2: (data.find((item: { word: string }) => item.word === "recursos_item_2") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_3: (data.find((item: { word: string }) => item.word === "recursos_item_3") || {})[flag === "es" ? 'es' : 'en'] as string,
    recursos_item_4: (data.find((item: { word: string }) => item.word === "recursos_item_4") || {})[flag === "es" ? 'es' : 'en'] as string,
    siganos_footer_titulo: (data.find((item: { word: string }) => item.word === "siganos_footer_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    siganos_item_1: (data.find((item: { word: string }) => item.word === "siganos_item_1") || {})[flag === "es" ? 'es' : 'en'] as string,
    siganos_item_2: (data.find((item: { word: string }) => item.word === "siganos_item_2") || {})[flag === "es" ? 'es' : 'en'] as string,
    legal_footer_titulo: (data.find((item: { word: string }) => item.word === "legal_footer_titulo") || {})[flag === "es" ? 'es' : 'en'] as string,
    legal_item_1: (data.find((item: { word: string }) => item.word === "legal_item_1") || {})[flag === "es" ? 'es' : 'en'] as string,
    legal_item_2: (data.find((item: { word: string }) => item.word === "legal_item_2") || {})[flag === "es" ? 'es' : 'en'] as string,
    rights_footer: (data.find((item: { word: string }) => item.word === "rights_footer") || {})[flag === "es" ? 'es' : 'en'] as string,
    iniciar_text: (data.find((item: { word: string }) => item.word === "iniciar_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    registrarse_text: (data.find((item: { word: string }) => item.word === "registrarse_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    welcome_back_text: (data.find((item: { word: string }) => item.word === "welcome_back_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    have_you_text: (data.find((item: { word: string }) => item.word === "have_you_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    new_notifications_text: (data.find((item: { word: string }) => item.word === "new_notifications_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    view_all_text: (data.find((item: { word: string }) => item.word === "view_all_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    first_part_make_loan: (data.find((item: { word: string }) => item.word === "first_part_make_loan") || {})[flag === "es" ? 'es' : 'en'] as string,
    first_loan_text: (data.find((item: { word: string }) => item.word === "first_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    please_enter_text: (data.find((item: { word: string }) => item.word === "please_enter_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    make_loan_text: (data.find((item: { word: string }) => item.word === "make_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    pay_loan_text: (data.find((item: { word: string }) => item.word === "pay_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    clear_all_text: (data.find((item: { word: string }) => item.word === "clear_all_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    title_promo_text: (data.find((item: { word: string }) => item.word === "title_promo_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    placeholder_promo_text: (data.find((item: { word: string }) => item.word === "placeholder_promo_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    send_text: (data.find((item: { word: string }) => item.word === "send_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    history_movements_text: (data.find((item: { word: string }) => item.word === "history_movements_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    movement_text: (data.find((item: { word: string }) => item.word === "movement_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    fecha_text: (data.find((item: { word: string }) => item.word === "fecha_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    description_text: (data.find((item: { word: string }) => item.word === "description_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    clear_text: (data.find((item: { word: string }) => item.word === "clear_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    from_text: (data.find((item: { word: string }) => item.word === "from_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    not_found_notifications_text: (data.find((item: { word: string }) => item.word === "not_found_notifications_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    show_text: (data.find((item: { word: string }) => item.word === "show_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    send_transfer_text: (data.find((item: { word: string }) => item.word === "send_transfer_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    get_transfer_text: (data.find((item: { word: string }) => item.word === "get_transfer_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    send_loan_text: (data.find((item: { word: string }) => item.word === "send_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    with_amout_text: (data.find((item: { word: string }) => item.word === "with_amout_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    number_register_is_text: (data.find((item: { word: string }) => item.word === "number_register_is_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    balance_avaible_is_text: (data.find((item: { word: string }) => item.word === "balance_avaible_is_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    not_register_income_text: (data.find((item: { word: string }) => item.word === "not_register_income_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    income_amount_is_text: (data.find((item: { word: string }) => item.word === "income_amount_is_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    title_loan_text: (data.find((item: { word: string }) => item.word === "title_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    not_found_loans_text: (data.find((item: { word: string }) => item.word === "not_found_loans_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    hide_all_text: (data.find((item: { word: string }) => item.word === "hide_all_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    name_text: (data.find((item: { word: string }) => item.word === "name_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    id_loan_text: (data.find((item: { word: string }) => item.word === "id_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    amount_text: (data.find((item: { word: string }) => item.word === "amount_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    interes_text: (data.find((item: { word: string }) => item.word === "interes_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_cuotas: (data.find((item: { word: string }) => item.word === "text_cuotas") || {})[flag === "es" ? 'es' : 'en'] as string,
    frecuencia_one_text: (data.find((item: { word: string }) => item.word === "frecuencia_one_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    next_date_text: (data.find((item: { word: string }) => item.word === "next_date_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    excedent_pay_text: (data.find((item: { word: string }) => item.word === "excedent_pay_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    pay_cuotas_text: (data.find((item: { word: string }) => item.word === "pay_cuotas_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    description_pay_cuotas_text: (data.find((item: { word: string }) => item.word === "description_pay_cuotas_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    number_cuotas_text: (data.find((item: { word: string }) => item.word === "number_cuotas_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    title_pay_cuotas_text: (data.find((item: { word: string }) => item.word === "title_pay_cuotas_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    calculate_cuotas_text: (data.find((item: { word: string }) => item.word === "calculate_cuotas_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    value_cuotas_text: (data.find((item: { word: string }) => item.word === "value_cuotas_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    available_balance: (data.find((item: { word: string }) => item.word === "available_balance") || {})[flag === "es" ? 'es' : 'en'] as string,
    total_income_text: (data.find((item: { word: string }) => item.word === "total_income_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    check_card_text: (data.find((item: { word: string }) => item.word === "check_card_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    check_card_text_second: (data.find((item: { word: string }) => item.word === "check_card_text_second") || {})[flag === "es" ? 'es' : 'en'] as string,
    content_check_card_text: (data.find((item: { word: string }) => item.word === "content_check_card_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    content_check_card_text_second: (data.find((item: { word: string }) => item.word === "content_check_card_text_second") || {})[flag === "es" ? 'es' : 'en'] as string,
    security_text: (data.find((item: { word: string }) => item.word === "security_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    content_security_text: (data.find((item: { word: string }) => item.word === "content_security_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    learn_more_text: (data.find((item: { word: string }) => item.word === "learn_more_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    transferir_text: (data.find((item: { word: string }) => item.word === "transferir_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    simulate_loan_text: (data.find((item: { word: string }) => item.word === "simulate_loan_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    more_text: (data.find((item: { word: string }) => item.word === "more_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    not_found_text: (data.find((item: { word: string }) => item.word === "not_found_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    text_transfer: (data.find((item: { word: string }) => item.word === 'text_transfer') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_numero_tarjeta_destino: (data.find((item: { word: string }) => item.word === 'text_numero_tarjeta_destino') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_monto_transfer: (data.find((item: { word: string }) => item.word === 'text_monto_transfer') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_description_transfer: (data.find((item: { word: string }) => item.word === 'text_description_transfer') || {})[flag === "es" ? 'es' : 'en'] as string,
    type_description_transfer: (data.find((item: { word: string }) => item.word === 'type_description_transfer') || {})[flag === "es" ? 'es' : 'en'] as string,
    make_transfer: (data.find((item: { word: string }) => item.word === 'make_transfer') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_profile_text: (data.find((item: { word: string }) => item.word === 'title_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_profile_text: (data.find((item: { word: string }) => item.word === 'description_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_profile_text: (data.find((item: { word: string }) => item.word === 'subtitle_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_subtitle_profile_text: (data.find((item: { word: string }) => item.word === 'description_subtitle_profile_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    update_text: (data.find((item: { word: string }) => item.word === 'update_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    profile_picture_text: (data.find((item: { word: string }) => item.word === 'profile_picture_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_profile_picture_text: (data.find((item: { word: string }) => item.word === 'description_profile_picture_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    username_text: (data.find((item: { word: string }) => item.word === 'username_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    id_number_text: (data.find((item: { word: string }) => item.word === 'id_number_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    phone_text: (data.find((item: { word: string }) => item.word === 'phone_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    email_text: (data.find((item: { word: string }) => item.word === 'email_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    notifications_text: (data.find((item: { word: string }) => item.word === "notifications_text") || {})[flag === "es" ? 'es' : 'en'] as string,
    description_notifications_text: (data.find((item: { word: string }) => item.word === 'description_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_notifications_text: (data.find((item: { word: string }) => item.word === 'subtitle_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription_notifications_text: (data.find((item: { word: string }) => item.word === 'subdescription_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle2_notifications_text: (data.find((item: { word: string }) => item.word === 'subtitle2_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription2_notifications_text: (data.find((item: { word: string }) => item.word === 'subdescription2_notifications_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_movements_text: (data.find((item: { word: string }) => item.word === 'title_movements_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_Transfer_text: (data.find((item: { word: string }) => item.word === 'title_Transfer_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_others_text: (data.find((item: { word: string }) => item.word === 'title_others_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_privacy_text: (data.find((item: { word: string }) => item.word === 'title_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_privacy_text: (data.find((item: { word: string }) => item.word === 'description_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_privacy_text: (data.find((item: { word: string }) => item.word === 'subtitle_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription_privacy_text: (data.find((item: { word: string }) => item.word === 'subdescription_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle2_privacy_text: (data.find((item: { word: string }) => item.word === 'subtitle2_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription2_privacy_text: (data.find((item: { word: string }) => item.word === 'subdescription2_privacy_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    consent_text: (data.find((item: { word: string }) => item.word === 'consent_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    current_password_text: (data.find((item: { word: string }) => item.word === 'current_password_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    change_password_text: (data.find((item: { word: string }) => item.word === 'change_password_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_new_password_invert: (data.find((item: { word: string }) => item.word === 'text_new_password_invert') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_repeat_new_password: (data.find((item: { word: string }) => item.word === 'text_repeat_new_password') || {})[flag === "es" ? 'es' : 'en'] as string,
    title_security_text: (data.find((item: { word: string }) => item.word === 'title_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    description_security_text: (data.find((item: { word: string }) => item.word === 'description_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle_security_text: (data.find((item: { word: string }) => item.word === 'subtitle_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription_security_text: (data.find((item: { word: string }) => item.word === 'subdescription_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subtitle2_security_text: (data.find((item: { word: string }) => item.word === 'subtitle2_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    subdescription2_security_text: (data.find((item: { word: string }) => item.word === 'subdescription2_security_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    active_2fa_text: (data.find((item: { word: string }) => item.word === 'active_2fa_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    configure_2fa_text: (data.find((item: { word: string }) => item.word === 'configure_2fa_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    code_auth_text: (data.find((item: { word: string }) => item.word === 'code_auth_text') || {})[flag === "es" ? 'es' : 'en'] as string,
    text_confirm: (data.find((item: { word: string }) => item.word === 'text_confirm') || {})[flag === "es" ? 'es' : 'en'] as string,
    income_monthly_text: (data.find((item: { word: string }) => item.word === 'income_monthly_text') || {})[flag === "es" ? 'es' : 'en'] as string,
};

text = {...text_1, ...text_2}


}catch(e){
    isContinue = false;
    Astro.cookies.set("ID-USER", "false", {expires: new Date("9999-12-31")});
    Astro.cookies.set("W-INIT-ENT", "false", {expires: new Date("9999-12-31")});
    return Astro.redirect("/")
}

---

<Layout title="Sebxstt - Inicio">
    <Header
        href_image="/"
        href_signin="./SignIn"
        href_signup="./SignUp"
        registrarse_text={text.registrarse_text || "Registrarse"}
        iniciar_text={text.iniciar_text || "Iniciar sesión"}
        isGoogle={isGoogle}
        notifications_text={text.notifications_text}
        clear_all_text={text.clear_all_text}
        title_promo_text={text.title_promo_text}
        placeholder_promo_text={text.placeholder_promo_text}
        send_text={text.send_text}
        not_found_text={text.not_found_text}
        history_movement_text={text.history_movements_text}
        movement_text={text.movement_text}
        date_text={text.fecha_text}
        description_text={text.description_text}
        clear_text={text.clear_text}
        from_text={text.from_text}
        not_found_notifications_text={text.not_found_notifications_text}
        show_text={text.show_text}
        send_transfer_text={text.send_transfer_text}
        get_transfer_text={text.get_transfer_text}
        send_loan_text={text.send_loan_text}
        with_amout_text={text.with_amout_text}
        number_register_is_text={text.number_register_is_text}
        balance_avaible_is_text={text.balance_avaible_is_text}
        not_register_income_text={text.not_register_income_text}
        income_amount_is_text={text.income_amount_is_text}
        title_profile_text={text.title_profile_text}
        description_profile_text={text.description_profile_text}
        subtitle_profile_text={text.subtitle_profile_text}
        description_subtitle_profile_text={text.description_subtitle_profile_text}
        update_text={text.update_text}
        profile_picture_text={text.profile_picture_text}
        description_profile_picture_text={text.description_profile_picture_text}
        username_text={text.username_text}
        id_number_text={text.id_number_text}
        phone_text={text.phone_text}
        email_text={text.email_text}
        description_notifications_text={text.description_notifications_text}
        subtitle_notifications_text={text.subtitle_notifications_text}
        subdescription_notifications_text={text.subdescription_notifications_text}
        subtitle2_notifications_text={text.subtitle2_notifications_text}
        subdescription2_notifications_text={text.subdescription2_notifications_text}
        title_movements_text={text.title_movements_text}
        title_Transfer_text={text.title_Transfer_text}
        title_others_text={text.title_others_text}
        notifications_text={text.notifications_text}
        title_loan_text={text.title_loan_text}
        title_privacy_text={text.title_privacy_text}
        description_privacy_text={text.description_privacy_text}
        subtitle_privacy_text={text.subtitle_privacy_text}
        subdescription_privacy_text={text.subdescription_privacy_text}
        subtitle2_privacy_text={text.subtitle2_privacy_text}
        subdescription2_privacy_text={text.subdescription2_privacy_text}
        consent_text={text.consent_text}
        current_password_text={text.current_password_text}
        change_password_text={text.change_password_text}
        text_new_password_invert={text.text_new_password_invert}
        text_repeat_new_password={text.text_repeat_new_password}
        title_security_text={text.title_security_text}
        description_security_text={text.description_security_text}
        subtitle_security_text={text.subtitle_security_text}
        subdescription_security_text={text.subdescription_security_text}
        subtitle2_security_text={text.subtitle2_security_text}
        subdescription2_security_text={text.subdescription2_security_text}
        active_2fa_text={text.active_2fa_text}
        configure_2fa_text={text.configure_2fa_text}
        code_auth_text={text.code_auth_text}
        email_text={text.email_text}
        text_confirm={text.text_confirm}
        income_monthly_text={text.income_monthly_text}
    ></Header>
    <PopupLoan
        text_information_loan={text.text_information_loan}
        text_information_personal={text.text_information_personal}
        type_loan={text.type_loan}
        text_finish_loan={text.text_finish_loan}
        text_confirm={text.text_confirm}
        text_simulate={text.text_simulate}
        text_amount_loan={text.text_amount_loan}
        text_tasa_loan={text.text_tasa_loan}
        text_cuotas={text.text_cuotas}
        text_frecuencia={text.text_frecuencia}
        text_name_complete={text.text_name_complete}
        email_text={text.email_text}
        id_number_text={text.id_number_text}
        phone_text={text.phone_text}
        text_tasa_fija={text.text_tasa_fija}
        text_tasa_variable={text.text_tasa_variable}
        text_select_cuotas={text.text_select_cuotas}
        text_select_frecuencia={text.text_select_frecuencia}
        level_account={data_user.user_info[0].level_account}
        loans_made={data_user.user_info[0].state_prestamo}
        max_base_amount={data_user.user_info[0].limit_monto}
        max_current_amount={data_user.user_info[0].limit_monto}
        limit_loans={data_user.user_info[0].limit_prestamo}
        multiplier={data_user.user_info[0].multiplier}
        income_rate={data_user.user_info[0].discount_tasa}
    ></PopupLoan>
    <Footer
        recursos_footer_titulo={text.recursos_footer_titulo}
        recursos_item_1={text.recursos_item_1}
        recursos_item_2={text.recursos_item_2}
        recursos_item_3={text.recursos_item_3}
        recursos_item_4={text.recursos_item_4}
        siganos_footer_titulo={text.siganos_footer_titulo}
        siganos_item_1={text.siganos_item_1}
        siganos_item_2={text.siganos_item_2}
        legal_footer_titulo={text.legal_footer_titulo}
        legal_item_1={text.legal_item_1}
        legal_item_2={text.legal_item_2}
        rights_footer={text.rights_footer}
    ></Footer>
</Layout>
